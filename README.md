# docker-on-linux

- [docker-on-linux](#docker-on-linux)
  - [Introduction](#introduction)
  - [Installation](#installation)
    - [Option A - Manual Provisioning](#option-a---manual-provisioning)
      - [Create Virtual Machine](#create-virtual-machine)
    - [Option B - Bash Provisioning](#option-b---bash-provisioning)
    - [Option C - Ansible Provisioning](#option-c---ansible-provisioning)

## Introduction

## Installation

In order to create Virtual Machines in declarative way, using VagrantFile, you first need to install the tool itself and a hypervisor of your choice.

- [Vagrant Project](https://www.vagrantup.com/)
- [VirtualBox](https://www.virtualbox.org/)
- [Hyper-V on Windows 10](https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v)

Since I am using a Windows environment with [WSL2](https://devblogs.microsoft.com/commandline/wsl2-will-be-generally-available-in-windows-10-version-2004/) enabled. I will describe the steps using Hyper-V as hypervisor provider for Vagrant.

### Option A - Manual Provisioning

#### Create Virtual Machine

Start by initializing the Vagrantfile with default values using the official [Centos 7 Vagrant box](https://app.vagrantup.com/centos/boxes/7). 

```bash
cd installation/centos-7
vagrant init centos/7
vagrant up
Bringing machine 'default' up with 'hyperv' provider...
==> default: Verifying Hyper-V is enabled...
==> default: Verifying Hyper-V is accessible...
==> default: Box 'centos/7' could not be found. Attempting to find and install...
    default: Box Provider: hyperv
    default: Box Version: >= 0
==> default: Loading metadata for box 'centos/7'
    default: URL: https://vagrantcloud.com/centos/7
==> default: Adding box 'centos/7' (v2004.01) for provider: hyperv
    default: Downloading: https://vagrantcloud.com/centos/boxes/7/versions/2004.01/providers/hyperv.box
Download redirected to host: cloud.centos.org
Progress: 2% (Rate: 3825k/s, Estimated time remaining: 0:02:29)
[ Output omitted for brevity]
```

Once the box is up and running, use `vagrant ssh` which is a wrapper that leverages SSH configuration that was generated by Vagrant. Details are available at `vagrant ssh-config`.

```bash
vagrant ssh
# Verify user
[vagrant@localhost ~]$ id
uid=1000(vagrant) gid=1000(vagrant) groups=1000(vagrant) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
# Verify release
[vagrant@localhost ~]$ cat /etc/*release
CentOS Linux release 7.8.2003 (Core)
NAME="CentOS Linux"
VERSION="7 (Core)"
ID="centos"
ID_LIKE="rhel fedora"
VERSION_ID="7"
PRETTY_NAME="CentOS Linux 7 (Core)"
ANSI_COLOR="0;31"
CPE_NAME="cpe:/o:centos:centos:7"
HOME_URL="https://www.centos.org/"
BUG_REPORT_URL="https://bugs.centos.org/"

CENTOS_MANTISBT_PROJECT="CentOS-7"
CENTOS_MANTISBT_PROJECT_VERSION="7"
REDHAT_SUPPORT_PRODUCT="centos"
REDHAT_SUPPORT_PRODUCT_VERSION="7"

CentOS Linux release 7.8.2003 (Core)
CentOS Linux release 7.8.2003 (Core)
```



### Option B - Bash Provisioning

### Option C - Ansible Provisioning

